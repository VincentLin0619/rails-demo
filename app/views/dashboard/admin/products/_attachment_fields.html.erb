<tr class="nested-fields justify-content-center">
    <td>
    <%= f.object.image_cache.inspect %>
      <%= f.file_field :image, onchange: "readURL(this);" %>
      <%= f.hidden_field :image_cache, value: f.object.image_cache %>
    </td>
    <td class="thumbnail-fluid">
    <p class="thumb"></p>
      <img id="imgUpload" src='#' />
      <%= image_tag f.object.image.url, class: "rounded mx-auto d-block img-fluid" if f.object.image.url.present? %>
    </td>
    <td>
      <%= f.label :description %>
      <%= f.text_field :description, :class => "form-control" %>
    </td>
    <td>
      <%= link_to_remove_association "移除這個檔案", f, :class => "btn btn-danger" unless f.object.new_record? %>
    </td>

</tr>
<script>
function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function (e) {
      $("#imgUpload").attr("src", e.target.result).width(150).height(200);
      document.querySelector(".thumb").innerHTML = reader.result;
    };
    reader.readAsDataURL(input.files[0]);
  }
}
</script>
